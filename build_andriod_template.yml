parameters:
- name:  jdkVersionOption
  default: '1.8'
- name: Build_version
  default: '4.0.0'
- name: Key_password
  default: '123456'
- name: keystore_password
  default: '123456'
- name: serverEndpoint
  default: 'team_c_app_center_connection'
- name: appSlug
  default: 'dayanandachari.v-nagarro.com/practice_andriod'
- name:  releaseNotesInput
  default: 'release notes'
- name: distributionGroupId
  default: '0557e448-6367-43d0-8d03-814b35c9ebcd'

steps:
- task: Gradle@2
  inputs:
    workingDirectory: ''
    gradleWrapperFile: 'gradlew'
    gradleOptions: '-Xmx3072m'
    javaHomeOption: 'JDKVersion'
    jdkVersionOption: ${{ parameters.jdkVersionOption }}
    jdkArchitectureOption: 'x64'
    publishJUnitResults: true
    testResultsFiles: '**/TEST-*.xml'
    tasks: 'assembleDebug'
  env:
    Build_version: ${{ parameters.Build_version }}
    build_code: $(Build.BuildId)
  displayName: gradlew assembleDebug

- task: AndroidSigning@3
  inputs:
    apkFiles: '**/*.apk'
    apksignerKeystoreFile: 'secret_andriod.jks'
    apksignerKeystorePassword: ${{ parameters.keystore_password }}
    apksignerKeystoreAlias: 'andriod_secret'
    apksignerKeyPassword: ${{ parameters.Key_password }}

- task: AppCenterDistribute@3
  inputs:
    serverEndpoint: ${{ parameters.serverEndpoint }}
    appSlug: ${{ parameters.appSlug }}
    appFile: 'app/build/outputs/apk/app-prod-debug.apk'
    symbolsOption: 'Android'
    releaseNotesOption: 'input'
    releaseNotesInput: ${{ parameters.releaseNotesInput }}
    destinationType: 'groups'
    distributionGroupId: ${{ parameters.distributionGroupId }}






#jobs: 
#- job: stages
## steps:
 ## script: echo hello world ${{parameters.employeename}}
 
#steps:
#- script: echo hello world ${{parameters.employeename}}
